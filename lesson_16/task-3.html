<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Task-3</title>
	<link rel="stylesheet" href="css/style.css">
	<script>
		// Задача. Задача 3. Об’єкт “Фірма” (використати члени-класи)
		//1) поля
		// а)назва фірми;
		// б)	дата заснування (рік, місяць);
		// в)	послуги (назва послуги, вартість, термін виконання);
		// г)	адреси філіалів (країна, місто, вулиця, номер будинку);
		//2) методи
		// а)	визначення кількості років існування фірми;
		// б)	виведення всіх філіалів фірми у вказаному місті;
		// в)	виведення на екран послуг, що можуть бути виконані за вказану суму грошей та вказаний термін часу;

		// ==================================================
		class Service {
			constructor(name, cost, duration) {
				this.name = name
				this.cost = cost
				this.duration = duration
			}
		}
		class Address {
			constructor(country, city, street, houseNumber) {
				this.country = country
				this.city = city
				this.street = street
				this.houseNumber = houseNumber
			}
		}
		class Firm {
			constructor(name, foundingYear, foundingMonth) {
				this.name = name
				this.foundingYear = foundingYear
				this.foundingMonth = foundingMonth
				this.services = []
				this.branches = []
			}
			getWorkingPeriod() {
				const currentDate = new Date();
				const years = currentDate.getFullYear() - this.foundingYear
				const months = currentDate.getMonth() + 1 - this.foundingMonth
				return months < 0 ? years - 1 : years
			}
			addService(service) {
				this.services.push(service)
			}
			addBranch(branch) {
				this.branches.push(branch)
			}
			getFilterBranches(city) {
				return this.branches.filter(branch => branch.city === city)
			}
			getServicesWithinBudgetAndDuration(maxCost, maxDuration) {
				return this.services.filter(service => service.cost <= maxCost && service.duration <= maxDuration)
			}
			toString() {
				return `Фірма ${this.name} працює вже ${this.getWorkingPeriod()} роки(ів).<br>Перелік філіалів ${firm.getFilterBranches()}`
			}
		}
		let services = [
			new Service("Service1", 100, 2),
			new Service("Service2", 150, 4),
			new Service("Service3", 200, 4),
			new Service("Service4", 150, 1),
			new Service("Service5", 200, 2)
		]
		let branches = [
			new Address("Country1", "Kyiv", "Street1", "123"),
			new Address("Country1", "Kyiv", "Street2", "456"),
			new Address("Country2", "Dnipro", "Street3", "789"),
			new Address("Country2", "Dnipro", "Street4", "111"),
			new Address("Country1", "Kyiv", "Street5", "222")
		]

		let startPeriod = parseInt(prompt("Ввести год заснування фірми"))

		const firm = new Firm("Bo&Bo", startPeriod, 7)
		for (const service of services) {
			firm.addService(service)
		}
		for (const branch of branches) {
			firm.addBranch(branch)
		}
		// document.write(`Срок існування: ${firm.toString()}<br>`);
		console.log("Срок існування:", firm.getWorkingPeriod())
		console.log("Філіали у Dnipro:", firm.getFilterBranches("Dnipro"))
		console.log("Services within budget and duration:", firm.getServicesWithinBudgetAndDuration(150, 4))















	</script>
</head>

<body>
	<div class="block-task__button">
		<a href="./index.html" class="block-task__link block-task__link_padding">Повернутися</a>
	</div>
</body>

</html>